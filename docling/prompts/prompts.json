{
  "api_config": {
      "openrouter": {
        "base_url": "https://openrouter.ai/api/v1",
        "api_key": "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"
      }
    },
  "metadata_extraction": {
    "korean_financial": {
      "system": "You are a professional document extraction assistant. Your job is to carefully extract metadata from semi-structured or unstructured Korean financial documents. Always follow the requested output format exactly.",
      "user": "다음은 한국어로 작성된 금융 보고서 문서의 일부입니다. 이 문서에서 아래 정보를 정확히 추출해주세요:\n\n1. 최초 작성일 (날짜가 여러 개 있으면 '보고자료' 또는 '회의자료'에 가까운 날짜 사용)\n2. 작성자 이름과 소속 또는 직책 (예: 채권시장팀 조용범 과장)\n3. 작성자 전화번호 (내선번호 포함 시 함께 출력)\n\n문서:\n---\n{document_content}\n---\n\n출력 형식은 반드시 아래와 같이 맞춰주세요 (JSON 형식):\n\n{{\n  \"작성일\": \"YYYY-MM-DD\",\n  \"작성자\": [\n    {{\"이름\": \"조용범\", \"소속\": \"채권시장팀\", \"직책\": \"과장\", \"전화\": \"4751\"}},\n    {{\"이름\": \"임인혁\", \"소속\": \"주식시장팀\", \"직책\": \"과장\", \"전화\": \"4672\"}}\n  ]\n}}",
      "description": "한국 금융 문서에서 작성일과 작성자 정보를 추출하는 프롬프트",
      "model": "google/gemma-3-27b-it:free",
      "seed": 3,
      "api_provider": "openrouter"
    },
    "korean_financial_date": {
      "system": "You are a highly skilled document extraction assistant specializing in Korean financial documents. Your task is to carefully analyze the given document and extract the creation date with high accuracy.",
      "user": "Follow these instructions precisely:\n\nHere is the financial document to analyze:\n\n<financial_document>\n{document_content}\n</financial_document>\n\nProcess:\n\n1. Carefully read through the entire document.\n\n2. Extract and list all date expressions found in the document. Include both Korean and English date formats, such as:\n   - 2024.05.10\n   - 24.05.10\n   - 2024년 5월 10일\n   - 5.10(금)\n   - 2024.5\n   - January 31, 2024\n\n3. Analyze the context of each date, paying special attention to:\n   - Dates directly associated with terms like \"작성일\", \"작성일자\", \"작성\", \"게제 확정일\"\n   - Dates near terms like \"보고자료\", \"회의자료\"\n   - Dates located near the title, at the top of the document, or at the beginning of the main text\n\n4. Apply the following selection criteria:\n   - Prioritize dates that are explicitly labeled as creation dates or appear in contexts suggesting document creation\n   - Be cautious of or exclude dates associated with terms like \"기준일\", \"통계일\", \"데이터 기준일\"\n   - Consider \"최종수정일\" (last modified date) only if no explicit creation date is found\n\n5. Select the most appropriate date based on your analysis.\n\n6. Normalize the selected date to the YYYY-MM-DD format.\n\n7. Provide your reasoning for the date selection.\n\nBefore providing your final answer, wrap your analysis inside <date_analysis> tags in your thinking block. Your analysis should include:\n- A list of extracted dates with their surrounding text snippets\n- Classification of each date as \"Likely creation date\", \"Possible creation date\", or \"Unlikely creation date\" based on context\n- Your reasoning for selecting the final date\n- Your confidence level in the selection (e.g., high, medium, low)\n\nIt's OK for this section to be quite long.\n\nOutput your final conclusion within <date> tags. If no suitable creation date is found, output \"없음\" (none) within the <date> tags.\n\nExample output structure (do not use this content, it's just to illustrate the format):\n\n<date_analysis>\nExtracted dates with context:\n1. \"작성일: 2023.04.15\" (Found in header)\n2. \"데이터 기준일: 2023.03.30\" (In body)\n3. \"최종수정일: 2023.04.14\" (At end of document)\n\nClassification:\n1. 2023.04.15 - Likely creation date\n2. 2023.03.30 - Unlikely creation date\n3. 2023.04.14 - Possible creation date\n\nAnalysis:\nThe date 2023.04.15 is explicitly labeled as the creation date (\"작성일\") and appears in the header, making it the most likely candidate for the document's creation date. The date 2023.03.30 is associated with \"데이터 기준일\" and thus not suitable as the creation date. The date 2023.04.14 is labeled as \"최종수정일\" (last modified date) and would only be considered if no explicit creation date was found.\n\nReasoning:\nI've selected 2023.04.15 as the creation date because it is explicitly labeled as such and appears in a prominent position in the document.\n\nConfidence level: High\n</date_analysis>\n\n<date>2023-04-15</date>\n\nNow, please proceed with your analysis and provide the creation date for the given financial document. Your final output must consist only of the date within <date> tags and must not duplicate or rehash any of the work you did in the thinking block.",
      "description": "한국 금융 문서에서 작성일을 추출하는 프롬프트",
      "model": "google/gemma-3-27b-it:free",
      "seed": 3,
      "temperature": 0.0,
      "api_provider": "openrouter",
      "max_tokens": 10000
    }
  },
  "toc_extraction": {
    "korean_document": {
      "system": "You are a professional assistant trained to generate structured, hierarchical tables of contents from Korean policy or research documents. Your job is to extract the document title and section titles/subtitles, and organize them using Arabic numerals (e.g., 1, 1.1, 1.2). Do not include page numbers. Do not add explanations or comments. Only output a clean list starting with the document title followed by the table of contents using information from the document.",
      "user": "다음은 PDF 문서에서 추출한 텍스트입니다. 이 문서의 제목과 구조에 맞게 목차를 생성해주세요.\n\n출력 형식:\n1. 첫 번째 줄에 'TITLE: [문서제목]' 형태로 문서 제목을 출력\n2. 그 다음 줄부터 계층적 목차를 출력 (순번과 제목만, 페이지 번호 생략)\n3. 계층 구조는 숫자로 표현 (1, 1.1, 1.1.1 등)\n\n예시:\nTITLE: 2024년 채권시장 동향 분석 보고서\n1. 개요\n1.1. 연구 목적\n1.2. 연구 범위\n2. 시장 현황\n2.1. 국내 채권시장\n2.2. 해외 채권시장\n\n문서 텍스트:\n\n{raw_text}",
      "description": "한국 문서에서 문서 제목과 계층적 목차를 추출하는 프롬프트",
      "model": "google/gemma-3-27b-it:free",
      "seed": 33,
      "temperature": 0.0,
      "top_p": 0,
      "api_provider": "openrouter"
    },
    "general_document": {
      "system": "You are a professional assistant trained to generate structured, hierarchical tables of contents from documents. Your job is to extract the document title and section titles/subtitles, and organize them using Arabic numerals (e.g., 1, 1.1, 1.2). Do not include page numbers. Do not add explanations or comments. Only output a clean list starting with the document title followed by the table of contents using information from the document.",
      "user": "다음은 PDF 문서에서 추출한 텍스트입니다. 이 문서의 제목과 구조에 맞게 목차를 생성해주세요.\n\n출력 형식:\n1. 첫 번째 줄에 'TITLE: [문서제목]' 형태로 문서 제목을 출력\n2. 그 다음 줄부터 계층적 목차를 출력 (순번과 제목만, 페이지 번호 생략)\n3. 계층 구조는 숫자로 표현 (1, 1.1, 1.1.1 등)\n\n예시:\nTITLE: 2024년 채권시장 동향 분석 보고서\n1. 개요\n1.1. 연구 목적\n1.2. 연구 범위\n2. 시장 현황\n2.1. 국내 채권시장\n2.2. 해외 채권시장\n\n문서 텍스트:\n\n{raw_text}",
      "description": "일반 문서에서 문서 제목과 계층적 목차를 추출하는 프롬프트",
      "model": "google/gemma-3-27b-it:free",
      "seed": 33,
      "temperature": 0.0,
      "top_p": 0,
      "api_provider": "openrouter"
    },
    "law_document": {
      "system": "당신은 규정/규칙/지침과 같은 한국어 문서에서 **목차**를 생성하는 전문가입니다.",
      "user": "주어진 문서에서 문서제목, 장, 절, 조의 제목을 추출하여 목차 형태로 출력하는 작업을 수행합니다.\n\n## 단계별 추론 (CoT 방식)\n1. 문서 첫머리 또는 첫 번째 장/조 앞에 위치한 긴 텍스트를 문서 제목 후보로 간주하고 `TITLE:<문서제목>` 형식으로 기록한다.\n2. 계층구조를 유지하기 위해 장 → 절 → 조 순서대로 탐색한다.\n3. \"제x장\" 패턴을 탐색한다. (띄어쓰기 유무 허용: \"제1장\", \"제 1 장\")\n4. \"제x절\" 패턴을 탐색한다. (띄어쓰기 유무 허용)\n5. \"제x조\" 패턴을 탐색한다. 뒤에는 괄호, 대시(-), 공백 중 어떤 형식이든 제목으로 간주한다.\n6. 3~5를 반복하면서 모든 장/절/조를 추출하고 계층을 유지한다. 절이 없는 경우 조는 장의 하위 번호로 직접 배치한다.\n7. 추출된 항목이 문서 순서와 일치하는지 검증한다.\n8. 결과를 순서대로 나열하여 목차를 완성한다.\n\n## 주의 사항\n1. 누락 항목이 없도록 모두 찾는다.\n2. 중복은 제거한다.\n3. 각 항목의 제목까지만 추출하고, 뒤 설명은 버린다.\n4. 문서 텍스트 그대로 추출한다.\n5. 목차가 있으면 참고하되 반드시 원문에서 추출한다.\n6. 본문 설명, 항목(①, ②, 1., 2.)은 포함하지 않는다.\n7. \"부칙\", \"별표\" 등은 목차에 포함하지 않는다.\n\n## 출력 형식\n- 첫 줄: `TITLE:<문서제목>`\n- 이후 줄: 장/절/조 타이틀\n- 계층 구조는 숫자로 표현(1, 1.1, 1.1.1 등)\n- 출력은 반드시 `숫자.` → 공백 → 원문 제목 형식만 따른다.\n\n---\n\n### Few-shot 예시\n\n#### 예시 입력 1\n회계처리 규정 절차서\n제1장 총칙\n제1조(목적) 이 절차는 회계 규정에 따라 운영한다.\n제2조(적용범위) 이 세칙은 …\n제3조(정의) 용어의 뜻은 …\n제4조(책임) 회계담당자는 …\n부칙\n이 규정은 2023년 1월 1일부터 시행한다.\n\n#### 예시 출력 1\nTITLE:회계처리 규정 절차서\n1. 제1장 총칙\n1.1. 제1조(목적)\n1.2. 제2조(적용범위)\n1.3. 제3조(정의)\n1.4. 제4조(책임)\n\n---\n\n#### 예시 입력 2\n인원보안 규정\n제2장 인원보안\n제1절 보안책임\n제10조(보안책임자) 보안담당은 …\n제11조(보안업무범위) 보안업무는 …\n\n#### 예시 출력 2\nTITLE:인원보안 규정\n1. 제2장 인원보안\n1.1. 제1절 보안책임\n1.1.1. 제10조(보안책임자)\n1.1.2. 제11조(보안업무범위)\n\n---\n\n#### 예시 입력 3\n보안업무규정\n제1장 총칙\n제1조(목적) 이 규정은 보안업무의 기본을 정...\n제2조(적용범위) 이 규정은 모든 보안업무에 적용된다.\n제2장 비밀보호\n제3조(비밀의 구분) 비밀은 다음과 같이 구분한다.\n제4조(비밀유지의무) 모든 직원은 비밀을 유지해야 한다.\n제3장 보안조사\n제1절 비밀의 생산\n제5조(보안사고 조사) 보안사고 발생 시 즉시 조사해야 한다.\n제6조(조사절차) 보안사고 조사는 다음과 같은 절차로 진행한다.\n제7조(조사결과 보고) 조사 결과는 즉시 상급자에게 보고해야 한다.\n\n#### 예시 출력 3\nTITLE:보안업무규정\n1. 제1장 총칙\n1.1. 제1조(목적)\n1.2. 제2조(적용범위)\n2. 제2장 비밀보호\n2.1. 제3조(비밀의 구분)\n2.2. 제4조(비밀유지의무)\n3. 제3장 보안조사\n3.1. 제1절 비밀의 생산\n3.1.1. 제5조(보안사고 조사)\n3.1.2. 제6조(조사절차)\n3.1.3. 제7조(조사결과 보고)\n\n---\n\n## 실제 작업할 입력\n{raw_text}",
      "description": "규정 문서에서 문서 제목과 계층적 목차를 추출하는 프롬프트",
      "model": "google/gemma-3-27b-it:free",
      "seed": 33,
      "temperature": 0.0,
      "top_p": 0,
      "api_provider": "openrouter",
      "max_tokens": 10000
    }
  },
  "document_checking": {
    "text_checking": {
      "system": "당신은 PDF에서 추출된 텍스트의 품질을 분석하여 OCR 수행이 필요한지를 판단하는 전문가입니다.",
      "user": "다음과 같은 기준을 참고하여 판단하세요:\n\n- 텍스트가 거의 없는 경우 (문자 수가 너무 적거나 10자 이하)\n- 대부분의 문자가 의미 없는 기호 또는 외계어처럼 보이는 경우 (예: \"Ê¾²¯Í­Å\" 등)\n- 전체의 70% 이상이 비ASCII 문자이거나 공백 비율이 과도하게 높을 경우\n- 텍스트가 존재하지만 문맥이 완전히 무의미하거나 손상된 경우\n- `GLYPH<c=4,font=/DDPDDH+HaansoftBatang>` 와 같은 인코딩 오류가 전체의 50% 이상인 경우\n\n판단은 다음 두 단계로 진행하세요:\n1. 추출된 텍스트의 품질을 분석합니다.\n2. OCR이 필요한지 여부를 `YES` 또는 `NO`로 명확하게 판단합니다.\n\n출력 형식은 다음과 같이 해주세요:\n<analysis>\n... 분석 내용 ...\n</analysis>\n<decision>\nYES 또는 NO\n</decision>\n\n아래는 예시입니다:\n\n---\n\n[예시 1]\n<text>\nÊ¾²¯Í­Å¹ºê¸®ÇÉ¾î½ºµå¸®¹ö...\n</text>\n<metadata>\n문자 수: 23, 비ASCII 비율: 0.91, 공백 비율: 0.02\n</metadata>\n\n<analysis>\n텍스트 대부분이 깨진 인코딩으로 보이며 의미를 해석할 수 없습니다.\nASCII 외 문자가 90% 이상이고 문장 구조도 파악되지 않습니다.\n</analysis>\n<decision>\nYES 또는 NO\n</decision>\n\n---\n\n[예시 2]\n<text>\n이 계약은 주식회사 한국정보기술과...\n</text>\n<metadata>\n문자 수: 57, 비ASCII 비율: 0.05, 공백 비율: 0.18\n</metadata>\n\n<analysis>\n텍스트는 정상적인 한글 문장으로 추출되었으며 내용도 이해 가능합니다.\n문자 수와 문맥도 충분하므로 OCR은 필요 없습니다.\n</analysis>\n<decision>\nYES 또는 NO\n</decision>\n\n---\n\n[예시 3]\n<text>\n</text>\n<metadata>\n문자 수: 0, 비ASCII 비율: 0.0, 공백 비율: 1.0\n</metadata>\n\n<analysis>\n텍스트가 전혀 추출되지 않았습니다.\n</analysis>\n<decision>\nYES 또는 NO\n</decision>\n\n---\n\n이제 다음 텍스트에 대해 동일한 형식으로 분석 및 판단을 진행하세요:\n\n[INPUT]\n<text>\n{content}\n</text>\n<metadata>\n문자 수: {text_len}, 비ASCII 비율: {non_ascii_ratio}, 공백 비율: {space_ratio}\n</metadata>",
      "description": "정상적인 텍스트로 구성된 문서인지 판단하는 프롬프트",
      "model": "google/gemma-3-27b-it:free",
      "temperature": 0.0,
      "api_provider": "openrouter",
      "max_tokens": 4000
    }
  }
}
